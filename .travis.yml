language: node_js
node_js:
  - '10'
env:
  global:
    - DATA_BUCKET=send-that-invoice-data
    - MAIL_NAME='Josephine James'
    - MAIL_USER=davidj28827@gmail.com
    - MAIL_REPLY_TO=davidj28827@gmail.com
    - MAIL_HOST=smtp.gmail.com
    - MAIL_PORT=587
    - secret_access_key:
        secure: jTyHAFf/yFZt796v1cw5rtmVjrHbiykvUOwB6aBF1rQkLnY0MroYn08jZMf9qBzRr+LGD9zpjr9kD9a/n5iLrdujGYWJCvXQl2mnIlWLlmCamOb9mKvYjnRaeNAd2OM3AvAFZUei9oidhjhVPCfl8+CGoGaFwc+MtVHPpuiRsaJpck21K/phSj8fiX6liMzZ/GHnCKrnHIS9+bP/UKWdbGwNRKyDGg2drBs74QKQMp9ecLgBB1eJutw4AH9ZOABRXjyeJgQAwM6YLZfqVhfhHBkJiGx/NZis8FIVgRomgs29zw4ofyPHgSzcqQVhvUarkAQyoiPvVHuVn7ze+O+4zbsqlwZ9xPigY5zDbJiyXFP0kCWx7elbG/SCcHwbVA/Elry9+g+Yfk+iOsNoaFchiU/wwHSbT7o5MaO9pa6qShe6QWIb540y6wESERZ19EkbebNxzrVj2lQn27wzDxwH30RLG9gZbWZOQdhmfn6p8wTc4Kc5QkziGpQWs0Nc/usSfgMe8D9v1EPigjj5t8b7AIoObOzgGbJuj+NYS03d+ERX1Yxstsao+H+r1/xHpeRg1Xk9mgq452klLcwfNvktM78AF7NqxouSzezOS4Q7s1SttQyKJgMa5rHj/6yU8p/N6BRDS1mGKjzT6nJdF5ZDVzwyCI8rae9Ye2l48jUc3QY=
    - access_key_id:
      secure: FGns0td2bSyuQq/4Tuu2OPrjFQcnfjn9g0z3FmeMLA8cb3JBy3OcNg/HIkvnCMv/suwmSN2+wBwSzUEEyVSM34VI7PxVMdmmfIEdesfynoRVuTKOOnukg5MFTmnAMT/cwzeLPnr/u1h/TNXrnOt9CbyMJQmBxumLR/BJ5zpi0CF9NP2muWeV7pgF8yUKdYU6qzCdOOaJrsQSmdNW2XQ7jfpBfDqmuHPn8hUrv8rCGNGj09+V0IsJhxfbe/OkuDCpduiLlIAArM5k1KaUplLz9+/jzntgz/WJ6K20MbQlsJmih+kot92dYkkQLA3u+p0sHQXy1KtWdrvxmTdIy8XYDWbPKRB13qT/4Q6HUevpobEZC9APmteb+Ry/oJeYIEQmDSWwulGyPAJ2ZezVRAGOcz9mjj4bx5SctmB1t2g8U8E8sfVpUGUSUZOBYQS2iO3mdoHoHW/PWx2Fze87VADIZpEr/GC/19a2ywZEHUswFU07tKp0hFjwltoitKnpejjvos2wcQlbohi+v2VIdwa8lXurZTVkQJX/hZMwMOPtFZ4KBbS83d8wQtu5B/7WM4kvUGa3a5cHfD/wyFj4qFGTP4KJgXQpauD9F5SZL54T/nvfDFvkSgF2AI5AaJap7zWdtgOHwtlbDAd5APesWBrRrF749/n2iNIEB3yBCfelHdY=
    - secure: p3y8Qy0WftjANT+dq4bLGdKtCnIv8k7iVYY8DoUyMZf2IhejFy7TDi2BNKJulu5FgZ583KKpiptiqIJUal9t5WEokPvKfDCJBIWQTw1TCtamWI0EUplqnWCPfynwdKyVK4faCRJ7v0myznKxDlnPaNI03gPNBscLhOs8UhLfj8WV1cbo5vhsyqS722tA7VGA9Aj9KT3eh5nlreb3BqYscugj3X0Zfj2iEFfty5UEdsMXqCon3UHJY1/VmZacvi7d+XKVMJ7c5ALN1iOeobTDFRU0h1gBsBesXhEgtM8mUWRf8D1awj2iOxLTjBBmcS6S6Ygz3QqTv0tCQgvTI4zZ8Fh+AIAxydLHVmB1U9qbIQ05EbgyiXXqs0dt6WbAovROJqc+umoS/Vg8YySt7zoYR0EsY0REL5NsUUcvs8Bz5dnemi+p1MDb6jPjNxk0f3bbj7I7QPBOmEkWq6UrMZorHXWu7nUyY5nWWMQeeJl7ojBkPP43mwkGRG+2So4MFXWNxTJyE+//PgnWkhuSdCUJfM03B4w05gs9VSa9RTwM1cnPp0ji79gTPJBs3DSNXeje+1nLxpzTELDzh4PizUiBTvC9Rg1OafnDmv9jUXfnixU992mtnclgk8e4bWP82LXYT5GBVm7f1Hej+Ig47eWRpHe/hc0eWBIJ3dhGJ6BSsvs=
    - secure: 'Frz9TthgWrvTAGHDHanNWrlqce0WA94YD/JXfVeeKlqNcC3r4lkxnkUAiBoA1otjhGmCRgRLo1Cd3qKOaorOJENOXTAyieI7De6Irwj0dMwU51mONL2R2pK+gvHh6RK1NUe8EY7wjdxJu6OTg9mnMSdOYYYSpEud7U61edkbSYfuSwavUNK24uZRDVUvoakkRH8VOk1TE65b3LCV7fLEJk2QWh2gqyKUwJ3y8lJTVC2JI8ARL2liiurvfJ9zu2XtwUbPfuZPZddznzHPgASGBajGEwxodnkb5z6zZTeL+8zGa+ABTPmCOJDViX/F/DhY7S/GsT0nNmvhPJSBs9r/j+sk/YHbYSD8XrlA48W33IYm4uqTTH5/ea/0f1Dwakp+RDlkN6MbHLJVx9FM8SvS9Nn23DypZ7Y8zUzYIMZumeC3tqeiKficYezj3tR0c4ZbmB5BCz4SnZlOfYWqvhsBBg25x1Y5s0S+/5zLuvtO69WazVd3NjM5Y9vKKZZVhdvnZ3tzrUMjuA+bPV71bQrx6NeY2QrtnIJsrHFrmCmqlNi5yOFgPogWAdFp7aq++1SW9eOavArPzKgwcQhHLVTJjb5Mdz5KS9ObRp3Cy2gn+hEfrhIE4izEWghi9xbGONTJg26IUhlegscYVxdrN0DuByKDy8Q7eYKwBGETXkR14Ts='
    - secure: 'LcC+iBjKyJD/gLT/TScYCSjZUie2uC70kIdm2XFZ9reI9jnWfCF322kFLMkeCeHYyd/MupWzSpSEUAPDN0/majHVCcLKnxGccDWIolg6d/mpyuhGgrjvPZAK/xnMIxR+CZtPSF9a0XgJC75BReKznEXQY10H4eFbDMOE/ygooQgsGWMDgYJoC7pnpU+Y0NesaGU3VVQIEkR37D8L9st+Cqal13JK+FuC5HK4OgvgPSuMIv6W/AwhmylUITG8Hl5m6uW1hLPM1i3y6zgdmNGQOtoAmbZHeDLxB6fno0e2BAgiF29JBcryW1JDIKVoXAhCy5+U/menf3UAO8S/WuZeI6PpxqngVofJOtGm+/DLyFDNt6trEf6wQtudERHrCAK2CZbECmuye5NwajlBHsS2G9OrivTID2i8CRZTgmM/eO2lHyM0DIWZH4cPYSTiz6hKxR4hV+70oxXi9+AJhhkxWj8tW+5kaUrlOQ8V0pqMUaQs8fsJY7EMNOEaSJe6M4KZaYrI864NQ0kxksRbMubDCNt/jCiQkvueS2fT4nACmF5lQWl28mKdUj3oqGjwVO+tXb1TBau8NVZD3nX2GY1POoaZ7zPBAvDHtqF0Ak7UM63Xdnoijave+6Pqt++I5e+Aa4/GoS5ILOFn3sVhHQ0EJ3aaUZ9xEixP1oSV5EGIpWI='
    - secure: 'ZMCctE9SxE1GeEtHKXjeibQa3VwVtUESG55ss0TJyEtxAzd7I8O4jbNG3QzihVYaVgRxrMsbeq/yX1Yy/M+2tgtq0lj4dR17CQ/CiTy2XfnSw4xD4PjrmDTLTMYD2IMMtG97coLoXNoxMZeJOZ2a+NJeBoMVV4asKsd68+njPmvDFNmr8DFQ8RTfjbUPes7QaHhT30D+nCpWyg/nTTKXlLhd2JU7y5BCDRJxooRPXUcTnMSqHLyf9a5K2dsGOe9dAl367+eFe2G8u4j9O8NPLWZX441MUonCxW9RWAwiAJ3S6E3yM63f7QBs1y+5bYWojvGZY+TmlBw5U5pUgLO1vfxvYCRJ9PEuz6Al65xZUEmAUYeXe9SuQj8KqrDAFB3eWuGiCoajzAyCvo2Ll1qAZCSGZmxWPivV9V/ppxRiie4fRgHxjnnhjmpIEz9mmYpfhSs7WpvqjWRCjuYrlV76WwU/RS/LDIonSnxiVHpA00vlD6Ug6EwNoV9V4gPPWT8yO/aqNido4YQwq7ZAev9O6P1Dp3KR6imqkJs2IeDKV/rWlEMbmU4NSnTxS0kaMREbdregGFhUionQShHAd1bTYaykzdBX6BBSd5McXmZ4sv2Pfb7hODXCV/KssLagBLzvi53xy1IcEqqYENGaT/wa9BTAbtSkgRebS/yR5RkIUn8='

before_install:
  - npm install -g aws-cdk
install:
  - npm install
  - npm run pre-build
script:
  - cdk synth
deploy:
  matrix:
    - provider: script
      script:
        - cdk deploy --require-approval never
      skip_cleanup: true
      on:
        branch: master
